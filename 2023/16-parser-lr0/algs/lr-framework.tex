% lr-framework.tex

\begin{algorithm}[H]
% \caption{}
% \label{alg:S}
\begin{algorithmic}[1]
  \Procedure{\blue{$LR$}}{\null}
    \State $\Call{Push}{S, s_{0}}$ \Comment{\gray{或 $\Call{Push}{S, \$_{s_{0}}}$}}
    \State $\token \gets \Call{\purple{next-token}}{\null}$

    \hStatex
    \While{$(1)$}
      \State $s \gets \Call{Top}{S}$

      \hStatex
      \If{\red{$\action[s, \token] = s_{i}$}} \Comment{\brown{移入}}
        \State $\Call{Push}{S, i}$ \Comment{\gray{或 $\Call{Push}{S, \token_{s_{i}}}$}}
        \State $\token \gets \Call{\purple{next-token}}{\null}$
      \ElsIf{\red{$\action[s, \token] = r_{j}$}} \Comment{\brown{归约; $j: A \to \alpha$}}
        \State $|\alpha|$ 次 $\Call{Pop}{S}$
        \State $s \gets \Call{Top}{S}$
        \State $\Call{Push}{S, \cyan{\goto[s, A]}}$ \Comment{\brown{转换状态};
          \gray{或 $\Call{Push}{S, A_{\goto[s, A]}}$}}
      \ElsIf{\red{$\action[s, \token] = acc$}} \Comment{\brown{接受}}
        \State {\bf break}
      \Else
        \State $\Call{\teal{error}}{\dots}$
      \EndIf
    \EndWhile
  \EndProcedure
\end{algorithmic}
\end{algorithm}